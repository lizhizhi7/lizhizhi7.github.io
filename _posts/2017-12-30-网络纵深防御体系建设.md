---
layout:     post
title:      网络安全建设纵深防御体系建设
subtitle:   网络安全系列
date:       2018-12-30
author:     Lee
header-img: img/background-websecurity.jpg
catalog: true
tags:
    - Web
    - 网络安全
---

### 自建WAF系统

#### 安装OpenResty

* 首先需要安装依赖库  
`yum install -y readline-devel pcre-devel openssl-devel`  

* 下载解压[OpenResty](http://openresty.org)压缩包  
```bash
wget https://openresty.org/download/openresty-1.13.6.1.tar.gz
cd openresty-1.13.6.1/
tar -xzvf openresty-1.13.6.1.tar.gz
```  

* 编译安装程序  
```bash
./configure --prefix=/home/xxx/opt/openresty --with-luajit --with-http_stub_status_module --with-pcre --with-pcre-jit
gmake
gmake install
```  
> 命令中的 `xxx` 为当前用户文件夹名称

#### 安装Nginx
```bash
sudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rp
sudo yum install -y nginx
sudo systemctl start nginx.service
sudo systemctl enable nginx.service
```

#### 安装unixhot
从GitHub同步代码,并将文件复制到指定地点
```bash
git clone https://github.com/unixhot/waf.git
cd waf
cp -fr waf /home/zhilee/opt/openresty/nginx/conf/
```

#### Nginx反向代理

#### 基于Nginx+Lua的反向代理